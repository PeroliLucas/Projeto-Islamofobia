<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mapa Mundial - Colonialismo</title>

    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson-client@3.1.0/dist/topojson-client.js"></script>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
      }

      #map-container {
        width: 100%;
        height: 90vh;
        position: relative;
      }

      #tooltip {
        position: absolute;
        background: white;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        pointer-events: none;
        opacity: 0;
        font-size: 14px;
      }

      .country {
        cursor: pointer;
        fill: #ddd;
        stroke: #333;
        stroke-width: 0.5;
      }

      .country:hover {
        fill: #c1272d;
      }
    </style>
  </head>

  <body>
    <div id="map-container">
      <svg id="world-map"></svg>
      <div id="tooltip"></div>
    </div>

    <script>
      const width = window.innerWidth;
      const height = window.innerHeight;

      const colonialData = {
        "France": { colonizer: "França", period: "1600-1960", notes: "Colônias na África e Sudeste Asiático" },
        "United Kingdom": { colonizer: "Reino Unido", period: "1600-1980", notes: "Colônias na África, América e Ásia" },
        "Portugal": { colonizer: "Portugal", period: "1400-1975", notes: "Colônias na África e Brasil" },
        "Spain": { colonizer: "Espanha", period: "1500-1900", notes: "Colônias nas Américas e Filipinas" },
        "Belgium": { colonizer: "Bélgica", period: "1880-1960", notes: "Colônias no Congo" },
        // Adicione mais países conforme necessário
      };

      const svg = d3.select("#world-map").attr("width", width).attr("height", height);
      const projection = d3.geoMercator();
      const path = d3.geoPath().projection(projection);

      d3.json("https://unpkg.com/world-atlas@2/countries-110m.json").then((worldData) => {
        const countries = topojson.feature(worldData, worldData.objects.countries).features;
        projection.fitSize([width, height], topojson.feature(worldData, worldData.objects.countries));

        svg
          .selectAll("path")
          .data(countries)
          .enter()
          .append("path")
          .attr("d", path)
          .attr("class", "country")
          .attr("fill", (d) => {
            const countryName = d.properties.name;
            return colonialData[countryName] ? "#c1272d" : "#ddd"; // Highlight colonial countries
          })
          .on("mouseover", (event, d) => {
            const countryName = d.properties.name;
            const info = colonialData[countryName];

            if (info) {
              const tooltip = d3.select("#tooltip");
              tooltip
                .style("opacity", 1)
                .html(
                  `<strong>${countryName}</strong><br>Colonizador: ${info.colonizer}<br>Período: ${info.period}<br>${info.notes}`
                )
                .style("left", `${event.pageX + 10}px`)
                .style("top", `${event.pageY + 10}px`);
            }
          })
          .on("mouseout", () => {
            d3.select("#tooltip").style("opacity", 0);
          });
      });
    </script>
  </body>
</html>